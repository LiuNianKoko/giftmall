{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/cqkj/Desktop/3.23新包/riceProject/pages/viper/shareCode.vue?cb53","webpack:///C:/Users/cqkj/Desktop/3.23新包/riceProject/pages/viper/shareCode.vue?0d73","webpack:///C:/Users/cqkj/Desktop/3.23新包/riceProject/pages/viper/shareCode.vue?be5d","webpack:///C:/Users/cqkj/Desktop/3.23新包/riceProject/pages/viper/shareCode.vue?4b30","uni-app:///pages/viper/shareCode.vue","webpack:///C:/Users/cqkj/Desktop/3.23新包/riceProject/pages/viper/shareCode.vue?11e6","webpack:///C:/Users/cqkj/Desktop/3.23新包/riceProject/pages/viper/shareCode.vue?de21"],"names":["createPage","Page"],"mappings":"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","file":"pages/viper/shareCode.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/viper/shareCode.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./shareCode.vue?vue&type=template&id=8fef6d84&\"\nvar renderjs\nimport script from \"./shareCode.vue?vue&type=script&lang=js&\"\nexport * from \"./shareCode.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shareCode.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/viper/shareCode.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shareCode.vue?vue&type=template&id=8fef6d84&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shareCode.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shareCode.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"header-wrap\">\r\n\t\t\t<!-- #ifndef MP-WEIXIN -->\r\n\t\t\t<image class=\"xiazai\" src=\"/static/xiazai.png\" @click=\"showHids\"></image>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<!-- <image class=\"xiazai\" src=\"/static/xiazai.png\" @click=\"copyFn\"></image> -->\r\n\t\t\t<view class=\"index-header\">\r\n\t\t\t\t分享推广\r\n\t\t\t\t<image class=\"back-icon\" src=\"/static/back-black.png\" @click=\"back\"></image>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"share-wraps\">\r\n\t\t\t<!-- <image class=\"code-bg\" :src='imag+\"twocode-bg.jpg\"'></image> -->\r\n\t\t\t<!-- <image class=\"code-bg\" :src='imag+\"15.jpg\"'></image> -->\r\n\t\t\t<image class=\"code-bg\" :src='imag+\"share-image-bj.png\"'></image>\r\n\t\t\t<view class=\"code-wrap\">\r\n\t\t\t\t<image class=\"code-bg2\" :src='imag+\"share-image-hz.png\"'></image>\r\n\t\t\t\t<image class=\"code\" :src=\"codeImg\"></image>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- <view class=\"share-text\">\r\n\t\t\t\t扫一扫注册\r\n\t\t\t</view> -->\r\n\t\t</view>\r\n\t\t<!-- 生成图片 -->\r\n\t\t<view class=\"flex_row_c_c modalView\" :class=\"qrShow?'show':''\" @tap=\"hideQr()\">\r\n\t\t\t<view class=\"flex_column\">\r\n\t\t\t\t<view class=\"backgroundColor-white padding1vh border_radius_10px\">\r\n\t\t\t\t\t<image :src=\"poster.finalPath\" mode=\"widthFix\" class=\"posterImage\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex_row marginTop2vh\">\r\n\t\t\t\t\t<button type=\"primary\" size=\"mini\" @tap.prevent.stop=\"saveImage()\">保存图片</button>\r\n\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"hideCanvasView\">\r\n\t\t    <canvas class=\"hideCanvas\" canvas-id=\"default_PosterCanvasId\" :style=\"{width: (poster.width||0) + 'px', height: (poster.height||0) + 'px'}\"></canvas>\r\n\t\t</view>\r\n\t\t\r\n\t\t<QSPopup ref=\"QSPopupShare\" type=\"fadeInUp\">\r\n\t\t\t<view class=\"share-order disFlex\">\r\n\t\t\t\t<view class=\"share-item\">\r\n\t\t\t\t\t<image src=\"/static/wxfriend.png\"></image>\r\n\t\t\t\t\t微信好友\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"share-item\">\r\n\t\t\t\t\t<image src=\"/static/friendcircle.png\"></image>\r\n\t\t\t\t\t朋友圈\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"sure-btn\" @tap=\"hides('QSPopupShare')\">\r\n\t\t\t\t\t取消\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</QSPopup>\r\n\t\t<view class=\"hids\" v-if=\"hids\" @click=\"hidsctx\"></view>\r\n\t\t<view class=\"hids-main\" v-if=\"hids\" @click=\"hidsctx\">\r\n\t\t\t<view>\r\n\t\t\t\t<image :src='imag+\"15.jpg\"' mode=\"\" class=\"bgimg\"></image>\r\n\t\t\t\t<image class=\"codes\" :src=\"codeImg\"></image>\r\n\t\t\t</view>\r\n\t\t\t<canvas style=\"width: 100%; height: 100%;\" canvas-id=\"firstCanvas\" class=\"firstCanvas\"></canvas>\r\n\t\t\t<view class=\"btn-wrap\">\r\n\t\t\t\t<button type=\"primary\" size=\"mini\" @tap.prevent.stop=\"shareF()\">保存图片</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- <canvas style=\"width: 200px; height: 440px;\" canvas-id=\"firstCanvas\"></canvas> -->\r\n\t</view>\n</template>\n\n<script>\r\n\timport http from '@/api/http.js'\r\n\timport QSPopup from '@/components/QS-popup/QS-popup.vue';\r\n\timport getSharePoster from '@/components/QS-SharePoster/QS-SharePoster.js'\r\n\tconst app = getApp();\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\timag: app.globalData.imag,\r\n\t\t\t\tcodeImg:'',\r\n\t\t\t\tbgImg:'',\r\n\t\t\t\twindowWidth:0,\r\n\t\t\t\twindowHeight:0,\r\n\t\t\t\tbase64:null,\r\n\t\t\t\tposter: {},\r\n\t\t\t\tqrShow: false,\r\n\t\t\t\tcanvasId: 'default_PosterCanvasId',\r\n\t\t\t\thids:false,\r\n\t\t\t\tdownloadPic:''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {QSPopup},\r\n\t\tonLoad() {\r\n\t\t\tthis.getCode();\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\tonShareAppMessage(option) {\r\n\t\t\tlet that = this\r\n\t\t\t return {\r\n\t\t\t      title: '扫一扫注册',\r\n\t\t\t      path: '/pages/index/index',\r\n\t\t\t\t  imageUrl:that.codeImg\r\n\t\t\t    }\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t\r\n\t\t\tback(){\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta:1\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tshow(ref) {\r\n\t\t\t\tthis.$refs[ref].show();\r\n\t\t\t},\r\n\t\t\thides(ref) {\r\n\t\t\t\tthis.$refs[ref].hide();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetCode(){\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\ttoken:uni.getStorageSync('token')\r\n\t\t\t\t}\r\n\t\t\t\thttp('/api/user/qrcode','post',data).then(res=>{\r\n\t\t\t\t\tif(res.data.status == '200'){\r\n\t\t\t\t\t\tthis.codeImg = res.data.data.qrcode\r\n\t\t\t\t\t\tthis.bgImg = res.data.data.share\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// else{-\r\n\t\t\t\t\t// \tthis.$util.showToast('网络异常，请重试!');\r\n\t\t\t\t\t// }\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tshowHids(){\r\n\t\t\t\tthis.hids = true\r\n\t\t\t},\r\n\t\t\thidsctx(){\r\n\t\t\t\tthis.hids = false\r\n\t\t\t},\r\n\t\t\tshareF(){\r\n\t\t\t\tlet that = this\r\n\t\t\t\tthat.hids = true\r\n\t\t\t\tlet codeimg = ''\r\n\t\t\t\tif(that.codeImg){\r\n\t\t\t\t\tcodeimg = that.codeImg\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcodeimg = that.imag+'twocode-bg.jpg'\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tvar ctx = uni.createCanvasContext('firstCanvas')\r\n\t\t\t\t\t// 背景\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.drawImage(that.imag+'15.jpg',0,0,270,400)\r\n\t\t\t\t\tctx.rotate(73 * Math.PI / 180)\r\n\t\t\t\t\tctx.drawImage(codeimg,214,-115,110,110)\r\n\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\tctx.draw(false, ()=>{\r\n\t\t\t\t\t     that.$util.showLoading('请稍后，正在生成...');\r\n\t\t\t\t\t     setTimeout(function(){\r\n\t\t\t\t\t      uni.canvasToTempFilePath({\r\n\t\t\t\t\t       x:0,\r\n\t\t\t\t\t       y:0,\r\n\t\t\t\t\t       width:270,\r\n\t\t\t\t\t       height:400,\r\n\t\t\t\t\t       fileType:'png',\r\n\t\t\t\t\t       quality:1,\r\n\t\t\t\t\t       canvasId: 'firstCanvas',\r\n\t\t\t\t\t       success: (res) => {\r\n\t\t\t\t\t        console.log('1212',res);\r\n\t\t\t\t\t        that.downloadPic = res.tempFilePath;\r\n\t\t\t\t\t        // uni.hideLoading();\r\n\t\t\t\t\t\t\tthat.$util.hideLoading()\r\n\t\t\t\t\t        if (res.errMsg == \"canvasToTempFilePath:ok\") {\r\n\t\t\t\t\t         that.downs();\r\n\t\t\t\t\t        }\r\n\t\t\t\t\t       },\r\n\t\t\t\t\t       fail(err) {\r\n\t\t\t\t\t        console.log(err);\r\n\t\t\t\t\t       }\r\n\t\t\t\t\t      })\r\n\t\t\t\t\t     },500)\r\n\t\t\t\t\t    })\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tdowns(){\r\n\t\t\t    let that = this;\r\n\t\t\t\tconsole.log(that.downloadPic)\r\n\t\t\t    uni.saveImageToPhotosAlbum({\r\n\t\t\t     filePath: that.downloadPic,\r\n\t\t\t     success: function(errMsg){\r\n\t\t\t\t\t\r\n\t\t\t      // this.$toast(\"保存成功\");\r\n\t\t\t      console.log('3443',errMsg);\r\n\t\t\t      uni.showToast({\r\n\t\t\t       title:'保存成功'\r\n\t\t\t      })\r\n\t\t\t\t  setTimeout(()=>{\r\n\t\t\t\t\tthat.hids = false  \r\n\t\t\t\t  },1000)\r\n\t\t\t     },\r\n\t\t\t     fail: function(err){\r\n\t\t\t      uni.showToast({\r\n\t\t\t       title:'保存失败',\r\n\t\t\t       icon:'none'\r\n\t\t\t      });\r\n\t\t\t      console.log(err);\r\n\t\t\t     }\r\n\t\t\t    })\r\n\t\t\t   },\r\n\t\t\tasync shareFc() {\r\n\t\t\t\tlet that = this\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (!that.poster.finalPath) {\r\n\t\t\t\t\t\tconst d = await getSharePoster({\r\n\t\t\t\t\t\t\ttype: 'testShareType',\r\n\t\t\t\t\t\t\t// background:{\r\n\t\t\t\t\t\t\t// \twidth:750,\r\n\t\t\t\t\t\t\t// \theight:1200,\r\n\t\t\t\t\t\t\t// \tbackgroundColor:white\r\n\t\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t\tbackgroundImage:that.bgImg,\r\n\t\t\t\t\t\t\tposterCanvasId: that.canvasId,\r\n\t\t\t\t\t\t\tqrCodeArray: ({bgObj, type, bgScale}) => {\r\n\t\t\t\t\t\t\t\treturn [{\r\n\t\t\t\t\t\t\t\t\ttext: '',\r\n\t\t\t\t\t\t\t\t\tsize: bgObj.width*0.01,\r\n\t\t\t\t\t\t\t\t\tdx: bgObj.width*0.1 - 999,\r\n\t\t\t\t\t\t\t\t\tdy: bgObj.height - bgObj.width*0.1\r\n\t\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\timagesArray: ({bgObj, type, bgScale}) => { //接收的第一个参数为背景图片的信息, 第二个参数是自定义标识（感觉这里用不到）, 图片为示例图片\r\n\t\t\t\t\t\t\t\tconst dx = bgObj.width*0.3; \r\n\t\t\t\t\t\t\t\treturn [{\r\n\t\t\t\t\t\t\t\t\turl: that.codeImg,\r\n\t\t\t\t\t\t\t\t\tdx,\r\n\t\t\t\t\t\t\t\t\tdy: bgObj.height - bgObj.width*0.9,\r\n\t\t\t\t\t\t\t\t\tdWidth:240,\r\n\t\t\t\t\t\t\t\t\tdHeight:240,\r\n\t\t\t\t\t\t\t\t\t// dy: bgObj.height * 0.5,\r\n\t\t\t\t\t\t\t\t\t// infoCallBack(imageInfo) {\r\n\t\t\t\t\t\t\t\t\t// \tlet scale = bgObj.width*0.2 / imageInfo.height;\r\n\t\t\t\t\t\t\t\t\t// \treturn {\r\n\t\t\t\t\t\t\t\t\t// \t\tdWidth: bgObj.width*0.4,\t\r\n\t\t\t\t\t\t\t\t\t// \t\tdHeight: bgObj.width*0.4,\r\n\t\t\t\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttextArray: ({bgObj, type, bgScale}) => {\r\n\t\t\t\t\t\t\t\tconst fontSize = bgObj.width*0.08;\r\n\t\t\t\t\t\t\t\tconst lineHeight = bgObj.height*0.04;\r\n\t\t\t\t\t\t\t\treturn [{\r\n\t\t\t\t\t\t\t\t\t// fontStyle: 'italic',\r\n\t\t\t\t\t\t\t\t\t// text: '扫一扫注册',\r\n\t\t\t\t\t\t\t\t\t// size: fontSize,\r\n\t\t\t\t\t\t\t\t\t// color: 'white',\r\n\t\t\t\t\t\t\t\t\t// alpha: .5,\r\n\t\t\t\t\t\t\t\t\t// textAlign: 'center',\r\n\t\t\t\t\t\t\t\t\t// textBaseline: 'middle',\r\n\t\t\t\t\t\t\t\t\t// infoCallBack(textLength) {\r\n\t\t\t\t\t\t\t\t\t// \t_app.log('index页面的text的infocallback ，textlength:' + textLength);\r\n\t\t\t\t\t\t\t\t\t// \treturn {\r\n\t\t\t\t\t\t\t\t\t// \t\tdx: bgObj.width - textLength - fontSize,\r\n\t\t\t\t\t\t\t\t\t// \t\tdy: bgObj.height - lineHeight*3\r\n\t\t\t\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsetCanvasWH: ({bgObj, type, bgScale}) => { // 为动态设置画布宽高的方法，\r\n\t\t\t\t\t\t\t\tconsole.log(bgObj, type, bgScale)\r\n\t\t\t\t\t\t\t\tthat.poster = bgObj ;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t// setDraw: ({Context, bgObj, type, bgScale}) => {\r\n\t\t\t\t\t\t\t// \tContext.setFillStyle('black');\r\n\t\t\t\t\t\t\t// \tContext.setGlobalAlpha(0.3);\r\n\t\t\t\t\t\t\t// \tContext.fillRect(0, bgObj.height - bgObj.height*0.2, bgObj.width, bgObj.height*0.2);\r\n\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconsole.log('海报生成成功， 临时路径: ' + d.poster.tempFilePath)\r\n\t\t\t\t\t\tthat.poster.finalPath = d.poster.tempFilePath;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.qrShow = true;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tthat.$util.hideLoading();\r\n\t\t\t\t\tthat.$util.showToast(JSON.stringify(e));\r\n\t\t\t\t\tconsole.log(JSON.stringify(e));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsaveImage() {\r\n\t\t\t\tlet that = this\r\n\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\tfilePath: that.poster.finalPath,\r\n\t\t\t\t\t// filePath: that.base64,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tthat.$util.showToast('保存成功');\r\n\t\t\t\t\t\tthat.qrShow = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(rej) {\r\n\t\t\t\t\t\tthat.$util.showToast('保存失败');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t// // #ifdef H5\r\n\t\t\t\t// this.$util.showToast('保存了');\r\n\t\t\t\t// // #endif\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\thideQr() {\r\n\t\t\t\tthis.qrShow = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</script>\n\n<style lang=\"less\">\r\n\t.header-wrap {\r\n\t\twidth: 100%;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 999;\r\n\t\t// background:#FFFFFF;\r\n\t\t.index-header {\r\n\t\t\theight: 176upx;\r\n\t\t\tpadding: 0 30upx;\r\n\t\t\tpadding-top: 100upx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\ttext-align: center;\r\n\t\t\tfont-size: 40upx;\r\n\t\t\tposition: relative;\r\n\t\t\t.back-icon{\r\n\t\t\t\twidth: 25upx;\r\n\t\t\t\theight: 44upx;\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 32upx;\r\n\t\t\t\ttop: 106upx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.hids{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tbackground-color: #000;\r\n\t\topacity: 0.5;\r\n\t\tz-index: 1000;\r\n\t}\r\n\t.hids-main{\r\n\t\twidth: 520upx;\r\n\t\theight: 800upx;\r\n\t\tposition: fixed;\r\n\t\ttop: 12%;\r\n\t\tleft: 14%;\r\n\t\tbackground-color: #fff;\r\n\t\tz-index: 1001;\r\n\t\t\r\n\t\t.bgimg{\r\n\t\t\twidth: 520upx;\r\n\t\t\theight: 800upx;\r\n\t\t}\r\n\t\t.codes{\r\n\t\t\twidth: 246upx;\r\n\t\t\theight: 246upx;\r\n\t\t\tposition: absolute;\r\n\t\t\ttransform: rotate(73deg);\r\n\t\t\ttop: 360upx;\r\n\t\t\tleft: 138upx;\r\n\t\t}\r\n\t}\r\n\t.firstCanvas{\r\n\t\tposition: fixed;\r\n\t\ttop: -99999px;\r\n\t}\r\n\t.btn-wrap{\r\n\t\tposition: fixed;\r\n\t\tleft: 50%;\r\n\t\ttop: 80%;\r\n\t\ttransform: translateX(-50%);\r\n\t}\r\n\t.code-bg{\r\n\t\t\r\n\t\tposition: absolute;\r\n\t\twidth: 100%;\r\n\t\theight: calc(100% - 176upx);\r\n\t\ttop: 176upx;\r\n\t\tleft: 0;\r\n\t\tz-index: -2;\r\n\t}\r\n\t.code-wrap{\r\n\t\tposition: absolute;\r\n\t\tleft: 10%;\r\n\t\ttop: 50%;\r\n\t}\r\n\t.code-bg2{\r\n\t\t\r\n\t\twidth: 620upx;\r\n\t\theight: 620upx;\r\n\t\ttransform: rotate(-16deg);\r\n\t}\r\n\t.share-wraps{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tborder-top: 2upx solid #f2f2f5;\r\n\t\t// display: flex;\r\n\t\t// flex-direction: column;\r\n\t\t// justify-content: center;\r\n\t\t// align-items: center;\r\n\t\toverflow: hidden;\r\n\t\t.code{\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 78upx;\r\n\t\t\tleft: 126upx;\r\n\t\t\twidth: 314upx;\r\n\t\t\theight: 314upx;\r\n\t\t\t// margin-top: 410upx;\r\n\t\t\t// background-color: blue;\r\n\t\t\ttransform: rotate(73deg);\r\n\t\t}\r\n\t\t.share-text{\r\n\t\t\tfont-size: 36upx;\r\n\t\t\tmargin-top: 30upx;\r\n\t\t}\r\n\t}\r\n\t\r\n\t.xiazai{\r\n\t\twidth: 42upx;\r\n\t\theight: 42upx;\r\n\t\tposition: fixed;\r\n\t\ttop: 104upx;\r\n\t\tright: 30upx;\r\n\t\tz-index: 999;\r\n\t}\r\n\t//分享按钮弹出层\r\n\t.share-order{\r\n\t\twidth: 750upx;\r\n\t\theight: 430upx;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-top-left-radius: 10upx;\r\n\t\tborder-top-right-radius: 10upx;\r\n\t\tpadding: 100upx 180upx;\r\n\t\tbox-sizing: border-box;\r\n\t\tjustify-content: space-between;\r\n\t\t.share-item{\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\timage{\r\n\t\t\t\twidth: 80upx;\r\n\t\t\t\theight: 80upx;\r\n\t\t\t\tmargin-bottom: 20upx;\r\n\t\t\t\tmargin-top: 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.sure-btn{\r\n\t\twidth: 100%;\r\n\t\theight: 100upx;\r\n\t\tbackground:rgba(251,65,66,1);\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 100;\r\n\t\tfont-size: 40upx;\r\n\t\tcolor: #ffffff;\r\n\t\tline-height: 100upx;\r\n\t\ttext-align: center\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t// 海报插件css\r\n\t.hideCanvasView {\r\n\t\tposition: relative;\r\n\t}\r\n\t\r\n\t.hideCanvas {\r\n\t\tposition: fixed;\r\n\t\ttop: -99999upx;\r\n\t\tleft: -99999upx;\r\n\t\tz-index: -99999;\r\n\t}\r\n\t\r\n\t.flex_row_c_c {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.modalView {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\topacity: 0;\r\n\t\toutline: 0;\r\n\t\ttransform: scale(3);\r\n\t\tperspective: 2500upx;\r\n\t\tbackground: rgba(0, 0, 0, 0.6);\r\n\t\ttransition: all .3s ease-in-out;\r\n\t\tpointer-events: none;\r\n\t\tbackface-visibility: hidden;\r\n\t\tz-index: 999;\r\n\t}\r\n\t\r\n\t.modalView.show {\r\n\t\topacity: 1;\r\n\t\ttransform: scale(1);\r\n\t\tpointer-events: auto;\r\n\t}\r\n\t\r\n\t.flex_column {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\t\r\n\t.backgroundColor-white {\r\n\t\tbackground-color: white;\r\n\t}\r\n\t\r\n\t.border_radius_10px {\r\n\t\tborder-radius: 10px;\r\n\t}\r\n\t\r\n\t.padding1vh {\r\n\t\tpadding: 1vh;\r\n\t}\r\n\t\r\n\t.posterImage {\r\n\t\twidth: 60vw;\r\n\t}\r\n\t\r\n\t.flex_row {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t}\r\n\t\r\n\t.marginTop2vh {\r\n\t\tmargin-top: 2vh;\r\n\t}\n</style>\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--10-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--10-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--10-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--10-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\less-loader\\\\dist\\\\cjs.js??ref--10-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--10-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shareCode.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--10-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--10-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--10-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--10-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\less-loader\\\\dist\\\\cjs.js??ref--10-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--10-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shareCode.vue?vue&type=style&index=0&lang=less&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1606892947622\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}